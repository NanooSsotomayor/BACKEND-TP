# 1. CONFIGURACIÓN DEL SERVIDOR
server:
  port: 8086 # Puerto específico para el Microservicio de Tarifas

spring:
  # 2. CONFIGURACIÓN DEL DATASOURCE (SQL Server)
  datasource:
    # ✅ CORRECCIÓN 1: Cambiamos 'localhost' por el nombre del servicio de la BD: 'sqlserver'
    url: jdbc:sqlserver://sqlserver:1433;databaseName=sistema_viajes_db;encrypt=false;trustServerCertificate=false
    username: SA
    password: YourStrongPassword123!
    driver-class-name: com.microsoft.sqlserver.jdbc.SQLServerDriver

  # 3. CONFIGURACIÓN DE JPA/HIBERNATE
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.SQLServerDialect

  # 4. CONFIGURACIÓN DE SEGURIDAD (Keycloak Resource Server)
  security:
    oauth2:
      resourceserver:
        jwt:
          # ✅ CORRECCIÓN 2: Cambiamos 'localhost' por el nombre del servicio de Keycloak: 'keycloak'
          jwk-set-uri: http://keycloak:8080/auth/realms/viajes-ms-realm/protocol/openid-connect/certs